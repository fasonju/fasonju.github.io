<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="Index.css">
        <link rel="stylesheet" href="indexstyle.css">
        <title>Pathfinding visualizer</title>
        <meta name="viewport" cont="width=device-width, initial-scale=1">
        <style>
            .slidecontainer{
              width: 160px;
              height: 40px;
              position:absolute;
              top: 3%;
            }
            .slidecontainer.weight{
                left:70%;
                opacity: 0;
                pointer-events: none;
            }
            .slidecontainer.weight.visible{
                opacity:1;
                pointer-events: auto;
            }
            .slidecontainer.speed {
              left: 88%;
            }

            .slider {
              -webkit-appearance: none;
              width: 160px;
              height: 25px;
              background: #d3d3d3;
              outline: none;
              opacity: 0.7;
              -webkit-transition: .2s;
              transition: opacity .2s;
            }
            
            .slider:hover {
              opacity: 1;
            }
            
            .slider::-webkit-slider-thumb {
              -webkit-appearance: none;
              appearance: none;
              width: 25px;
              height: 25px;
              background: rgb(236, 117, 137);
              cursor: pointer;
            }
            
            .slider::-moz-range-thumb {
              width: 25px;
              height: 25px;
              background: #04AA6D;
              cursor: pointer;
            }
        </style>
    </head>
    <body onmouseup="mouseup()">
        <header>    
            <div class = "topnav">
                <a href="index.html">
                    <img src="logo.png" id="logo" alt="Logo"/>  
                </a>
                <div class="wrap">
                    <a href="tutorial.html">
                        <button type="button" class="buttonpink" class="button">Tutorial</button>
                    </a>
                    <button type="button" class="buttonpink" onclick ="Reset()" class="buttonshort">reset</button>
                    <button type="button" class="buttonpink" onclick="removetrack()">remove track</button>
                </div>
                <div id="weightslider" class="slidecontainer weight visible">
                    <input type="range" min="1" max="49" class="slider" id="myWeightrange"/>
                    <br/>
                    <p>weight: <span id="weightvalue"></span></p>
                </div>
                <div class="slidecontainer speed">
                    <input type="range" min="1" max="199" class="slider" id="myRange"/>
                    <br/>
                    <p>interval: <span id="value"></span></p>
                </div>
                <h1 id="toptext">Pathfinding visualizer</h1>
                <div id="dropdown" class="dropdown" data-dropdown>
                    <button class="link" data-dropdown-button>generate</button>
                    <div class="dropdown-menu">
                        <a  class="func" onclick="generaterandom()">random basic maze</a>
                        <br/>
                        <a class="func" onclick="generaterandomweight()">random weight maze</a>
                        <br/>
                        <a class = "func" onclick="randomprim()">prim's algorithm</a>
                        <br/>
                        <a class="func" onclick="generatestair()">basic stair</a>
                    </div>
                    <span class="arrow2"></span>
                </div>
            </div>
        </header>
        <main>
            <p id="pp"></p>
            <div id="grid"></div>
            <div class="select-c">
                <select id="dropdown2" onchange="getselectvalue()">
                    <option value="null">select your algorithm</option>
                    <option value="Breadthfirst">Breadth first</option>
                    <option value="Depthfirst">Depth first</option>
                    <option value="Bestfirst">Best first</option>
                    <option value="A*">A*</option>
                </select>
                <span class="arrow"></span>
            </div>
            <button class="buttonpink" id="run">Choose your algorithm</button>
            <table id="tab">
                <caption><h2>legend</h2></caption>  
                    <tr>
                        <td>
                            <script>
                                function startset()
                                {
                                    sets = true;    
                                    sete = false;
                                    
                                    document.getElementById("pp").innerHTML="click for startnode"
                                }
                             </script>
                            <div class="node" style="background-color: green;" id="legendstart" onclick="startset()"></div>
                        </td>
                        <td>
                            <h4>startnode</h4>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <script>
                                function endset()
                                {
                                    sete = true;
                                    sets = false;
                                    document.getElementById("pp").innerHTML="click for endnode"
                                }
                             </script>
                            <div class="node" style="background-color: red;" id="legendend" onclick="endset()"></div>
                        </td>
                        <td>
                            <h4>endnode</h4>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="node" id="legendwall" style="background-color: orange;" onclick ="dragwall()"></div>
                        </td>
                        <td>
                            <h4>wall</h4>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="node" id="legendweight" style="background-color: purple" onclick = "dragweight()"></div>
                        </td>
                        <td>
                            <h4>weight</h4>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="node" style="background-color: rgba(0,190,218,0.75);"></div>
                        </td>
                        <td>
                            <h4>passed node</h4>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="node" style="background-color: rgba(178,67,255,0.75);"></div>
                        </td>
                        <td>
                            <h4>found path</h4>
                        </td>
                    </tr>
            </table>
                <div></div>
            </div>
        </main>
        <footer>

        </footer>
    </body>
    <script src="makegrid.js"></script>
    <script src="BFS.js"></script>
    <script src="DFS.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        window.sessionStorage
        function mouseup(){mousedown = false;}
        if(sessionStorage.getItem("shown") != 'true')
        {
            sessionStorage.setItem("shown", 'true')
            swal("Do you want to read the tutorial?",{
            buttons:{
                read: "read it",
                cancel:"please read it"
            }
            }).then((value) => {
                if(value === "read")
                {
                    window.location.href="tutorial.html"
                }
            })
        }
    </script>
    <script>
        var speedslider = document.getElementById("myRange");
        var speedoutput = document.getElementById("value");
        speedoutput.innerHTML = speedslider.value;
        
        speedslider.oninput = function() {
            speed = parseInt(this.value);
            speedoutput.innerHTML = speed;
        }
        var weightslider = document.getElementById("myWeightrange");
        var weightoutput = document.getElementById("weightvalue");
        weightoutput.innerHTML = weightslider.value;
        
        weightslider.oninput = function() {
            weight = parseInt(this.value);
            weightoutput.innerHTML = weight;
        }
    </script>
    <script src="maze.js"></script>
    <script src="Astar.js"></script>
    <script src="BESTFS.js"></script>
    <script>
        function getselectvalue()
        {
            var selectedvalue = document.getElementById("dropdown2").value;
            
            var button = document.getElementById("run");
            button.replaceWith(button.cloneNode(true));
            var button = document.getElementById("run");
            switch(selectedvalue)
            {
                case "Breadthfirst":
                    button.innerText="Run Breadth first"
                    document.getElementById("weightslider").classList.remove("visible");
                    disabledweight = true;
                    removeweights();
                    dragwall();
                    button.addEventListener("click",BFS)
                    break;
                case "Depthfirst":
                    button.addEventListener("click",DFS)
                    disabledweight = true;
                    document.getElementById("weightslider").classList.remove("visible");
                    dragwall();
                    removeweights();
                    button.innerText="Run depth first"
                    break;
                case "Bestfirst":
                    button.addEventListener("click",BESTFS)
                    disabledweight = false;
                    button.innerText="Run best first"
                    document.getElementById("weightslider").classList.add("visible");
                    break;
                case "A*":
                    button.addEventListener("click",Astar)
                    disabledweight = false;
                    button.innerText="Run A*"
                    document.getElementById("weightslider").classList.add("visible");
                    break;
                case "null":
                    button.innerText ="Choose an algorithm"
            }
        }
    </script>
    <script>
        document.addEventListener("mousedown",e => {
            const isdropdownbutton = e.target.matches("[data-dropdown-button]")
            let currentdropdown = document.getElementById("dropdown");
            if(isdropdownbutton){
                currentdropdown.classList.toggle("active")
                
            }
            else if(!e.target.classList.contains("func"))
            {
                currentdropdown.classList.toggle("active",false)
            }
        })
    </script>
    <script>
        function dragwall()
        {
            tablewall =true;
            tableweight = false;
        }
        function dragweight()
        {
            if(!disabledweight)
            {
                tablewall = false;
                tableweight = true;
            }
        }
        function removeweights()
        {
            for(let i = 0; i< 1380; i++)
            {
                document.getElementById(i.toString()).toggleAttribute("isweight",false);
            }
        }
    </script>
</html>